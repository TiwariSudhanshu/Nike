<%- include ("./boiler.ejs") %>
<%- include ("./header.ejs") %>
<link rel="stylesheet" href="./files/bag.css">
<div class="bag">
    <div class="left-bag">
        <h2>Bag</h2>
        <% let sum = 0%>
        <% for (let product of bag ){ %>
            <div class="bag-shoe">
                <div class="bag-shoe-left">
                    <img src="<%=product.image%>" alt="img" id="bag-img">
                    <div class="bag-shoe-desc">
                        <h3 id="bag-name"><%=product.name%></h3>
                        <p id="bag-cat"><%=product.category.charAt(0).toUpperCase()+product.category.slice(1)%>'s Shoes</p>
                        <p>Size </p>
                        <p>Quantity</p>
                        <div class="shoe-icons">
                            <form action="http://localhost:8080/favourites" method="post">
                                <input type="hidden" name="idOfFavShoe" value="<%=product.id%>">
                                <button style="border: none; background: none; padding: 0; cursor: pointer;">
                                    <i class="fa-regular fa-heart"></i>
                                </button></form>
                            </form>
                            <form action="http://localhost:8080/bag/<%=product.id%>?_method=DELETE" method="post">
                                <button style="border: none; background: none; padding: 0; cursor: pointer;">
                                    <i class="fa-solid fa-trash"></i>
                                </button>
                            </form>                            
                        </div>
                    </div>
                </div>
                <div class="bag-shoe-right">
                    <p>MRP : &#8377; <%=product.price%></p>
                    <% let a = product.price;
                    a = a.replace (/,/g,'');
                    let b = Number (a);
                    sum = sum + b  %>
                </div>
            </div>
            <%}%>
            <form action="http://localhost:8080/shoes" id="add-form">
                <button class="bt5">+</button>
            </form>
    </div>
    <div class="right-bag">
        <h1>Summary</h1>
        <div class="right-bag-content">
        <div class="right-bag-left">
            <p>Subtotal</p>
            <p>Delivery & <br> Handling Charges</p>
            <hr>
            <p>Total :  </p>
            <hr>
        </div>
        <div class="right-bar-right">
            <p><%=sum%></p>
            <p>1000 <br><br>
            </p>
            <hr>
            <p><%=sum+1000%></p>
            <hr>
        </div>
        </div>
        <button id="bt4">Checkout</button>
    </div>
</div>

<dialog id="contain">
    <form action="">
    <div class="checkout">
        <button id="close">X</button>
        <input type="text" id="name" placeholder="Name" required>
        <input type="number" id="contactNo" placeholder="Contact number" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="text" id="add1" placeholder="House/Apartment no" required>
        <input type="text" id="add2" placeholder="Street name" required>
        <input type="text" id="add3" placeholder="Landmark(optional)">
        <input type="text" id="add4" placeholder="City" required>
        <input type="number" id="pin" placeholder="Enter your pincode" required>
        <input type="text" id="add5" placeholder="District" required>
        <input type="text" id="add6" placeholder="State/Country" required>
        <button id="bt7" type="submit">Place Order</button>
    </div>
</form>
</dialog>
<%- include ("./footer.ejs") %>


<script src="./files/bag.js"></script>

